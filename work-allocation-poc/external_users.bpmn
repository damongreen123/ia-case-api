<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_1co3w0n" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.0.0">
  <bpmn:process id="workAllocationExternal" name="Work Allocation External" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>Flow_08f59e7</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:exclusiveGateway id="Gateway_1yyxu1t" name="Match found in decision table?">
      <bpmn:incoming>Flow_12gsfoa</bpmn:incoming>
      <bpmn:outgoing>Flow_09s14sl</bpmn:outgoing>
      <bpmn:outgoing>Flow_1166pyp</bpmn:outgoing>
      <bpmn:outgoing>Flow_1o8oytg</bpmn:outgoing>
      <bpmn:outgoing>Flow_0a4dlwl</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_12gsfoa" sourceRef="Activity_12verdj" targetRef="Gateway_1yyxu1t" />
    <bpmn:sequenceFlow id="Flow_09s14sl" name="Yes" sourceRef="Gateway_1yyxu1t" targetRef="assign_task_external">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{task.mapped}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_1lyww85">
      <bpmn:incoming>Flow_04eihcz</bpmn:incoming>
      <bpmn:incoming>Flow_0rpmtxq</bpmn:incoming>
      <bpmn:incoming>Flow_1166pyp</bpmn:incoming>
      <bpmn:incoming>Flow_1o8oytg</bpmn:incoming>
      <bpmn:incoming>Flow_0a4dlwl</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_04eihcz" sourceRef="assign_task_external" targetRef="Event_1lyww85" />
    <bpmn:sequenceFlow id="Flow_1166pyp" name="No" sourceRef="Gateway_1yyxu1t" targetRef="Event_1lyww85">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{!task.mapped}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:businessRuleTask id="Activity_12verdj" name="Identify direction to be created" camunda:resultVariable="task" camunda:decisionRef="externalUsersCreateTask" camunda:mapDecisionResult="singleResult">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:outputParameter name="direction">#{task.direction}</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0onvqiz</bpmn:incoming>
      <bpmn:outgoing>Flow_12gsfoa</bpmn:outgoing>
    </bpmn:businessRuleTask>
    <bpmn:userTask id="assign_task_external" name="Assign task to external user for direction" camunda:candidateGroups="#{task.party}">
      <bpmn:incoming>Flow_09s14sl</bpmn:incoming>
      <bpmn:outgoing>Flow_04eihcz</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:boundaryEvent id="sendReminder1" cancelActivity="false" attachedToRef="assign_task_external">
      <bpmn:outgoing>Flow_0q1v559</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_0wbpqqy">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT#{task.firstDueDate}M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:serviceTask id="Activity_0a8z6i0" name="Send Reminder" camunda:type="external" camunda:topic="send_reminder">
      <bpmn:incoming>Flow_0q1v559</bpmn:incoming>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="sendRerminder2" cancelActivity="false" attachedToRef="assign_task_external">
      <bpmn:outgoing>Flow_1ulxzju</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_091rgkd">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT#{task.secondDueDate}M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1ulxzju" sourceRef="sendRerminder2" targetRef="Activity_0mapgce" />
    <bpmn:serviceTask id="Activity_0mapgce" name="Send Out of Time Direction/Order" camunda:type="external" camunda:topic="out_of_time">
      <bpmn:incoming>Flow_1ulxzju</bpmn:incoming>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="Event_0ya50l6" cancelActivity="false" attachedToRef="assign_task_external">
      <bpmn:outgoing>Flow_0au9mq6</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_05t00lw">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT#{task.thirdDueDate}M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_0au9mq6" sourceRef="Event_0ya50l6" targetRef="Activity_1l3ryn0" />
    <bpmn:userTask id="Activity_1l3ryn0" name="Assign task to internal user to escalate to JOH" camunda:assignee="${assignedTo}" camunda:candidateGroups="TCW">
      <bpmn:incoming>Flow_0au9mq6</bpmn:incoming>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_0q1v559" sourceRef="sendReminder1" targetRef="Activity_0a8z6i0" />
    <bpmn:sequenceFlow id="Flow_08f59e7" sourceRef="StartEvent_1" targetRef="Gateway_0tjbvtl" />
    <bpmn:sequenceFlow id="Flow_0onvqiz" sourceRef="Gateway_0tjbvtl" targetRef="Activity_12verdj" />
    <bpmn:parallelGateway id="Gateway_0tjbvtl">
      <bpmn:incoming>Flow_08f59e7</bpmn:incoming>
      <bpmn:outgoing>Flow_0onvqiz</bpmn:outgoing>
      <bpmn:outgoing>Flow_1bearby</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:sequenceFlow id="Flow_1bearby" sourceRef="Gateway_0tjbvtl" targetRef="Activity_1cofxkq" />
    <bpmn:businessRuleTask id="Activity_1cofxkq" name="identify task to be completed" camunda:resultVariable="completeTask" camunda:decisionRef="externalUsersCompleteTask" camunda:mapDecisionResult="singleResult">
      <bpmn:incoming>Flow_1bearby</bpmn:incoming>
      <bpmn:outgoing>Flow_169vmwo</bpmn:outgoing>
    </bpmn:businessRuleTask>
    <bpmn:serviceTask id="recordTaskAsComplete" name="Record task as complete" camunda:type="external" camunda:topic="complete-task-external">
      <bpmn:incoming>Flow_169vmwo</bpmn:incoming>
      <bpmn:outgoing>Flow_0rpmtxq</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0rpmtxq" sourceRef="recordTaskAsComplete" targetRef="Event_1lyww85" />
    <bpmn:sequenceFlow id="Flow_1o8oytg" sourceRef="Gateway_1yyxu1t" targetRef="Event_1lyww85" />
    <bpmn:sequenceFlow id="Flow_0a4dlwl" name="No" sourceRef="Gateway_1yyxu1t" targetRef="Event_1lyww85">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{!task.mapped}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_169vmwo" sourceRef="Activity_1cofxkq" targetRef="recordTaskAsComplete" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="workAllocationExternal">
      <bpmndi:BPMNEdge id="Flow_0a4dlwl_di" bpmnElement="Flow_0a4dlwl">
        <di:waypoint x="510" y="225" />
        <di:waypoint x="510" y="80" />
        <di:waypoint x="1190" y="80" />
        <di:waypoint x="1190" y="359" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1128" y="92" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1o8oytg_di" bpmnElement="Flow_1o8oytg">
        <di:waypoint x="510" y="275" />
        <di:waypoint x="510" y="377" />
        <di:waypoint x="1172" y="377" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0rpmtxq_di" bpmnElement="Flow_0rpmtxq">
        <di:waypoint x="890" y="530" />
        <di:waypoint x="1190" y="530" />
        <di:waypoint x="1190" y="400" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1bearby_di" bpmnElement="Flow_1bearby">
        <di:waypoint x="220" y="402" />
        <di:waypoint x="220" y="530" />
        <di:waypoint x="300" y="530" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0onvqiz_di" bpmnElement="Flow_0onvqiz">
        <di:waypoint x="220" y="352" />
        <di:waypoint x="220" y="230" />
        <di:waypoint x="360" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08f59e7_di" bpmnElement="Flow_08f59e7">
        <di:waypoint x="158" y="377" />
        <di:waypoint x="195" y="377" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0q1v559_di" bpmnElement="Flow_0q1v559">
        <di:waypoint x="772" y="337" />
        <di:waypoint x="690" y="337" />
        <di:waypoint x="690" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0au9mq6_di" bpmnElement="Flow_0au9mq6">
        <di:waypoint x="908" y="337" />
        <di:waypoint x="990" y="337" />
        <di:waypoint x="990" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ulxzju_di" bpmnElement="Flow_1ulxzju">
        <di:waypoint x="840" y="319" />
        <di:waypoint x="840" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1166pyp_di" bpmnElement="Flow_1166pyp">
        <di:waypoint x="510" y="275" />
        <di:waypoint x="510" y="377" />
        <di:waypoint x="1172" y="377" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="770" y="133" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04eihcz_di" bpmnElement="Flow_04eihcz">
        <di:waypoint x="890" y="377" />
        <di:waypoint x="1172" y="377" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_09s14sl_di" bpmnElement="Flow_09s14sl">
        <di:waypoint x="510" y="275" />
        <di:waypoint x="510" y="377" />
        <di:waypoint x="790" y="377" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="512" y="320" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12gsfoa_di" bpmnElement="Flow_12gsfoa">
        <di:waypoint x="460" y="250" />
        <di:waypoint x="485" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_169vmwo_di" bpmnElement="Flow_169vmwo">
        <di:waypoint x="400" y="530" />
        <di:waypoint x="790" y="530" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="122" y="359" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1yyxu1t_di" bpmnElement="Gateway_1yyxu1t" isMarkerVisible="true">
        <dc:Bounds x="485" y="225" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="523" y="276" width="74" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1lyww85_di" bpmnElement="Event_1lyww85">
        <dc:Bounds x="1172" y="359" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1diue06_di" bpmnElement="Activity_12verdj">
        <dc:Bounds x="360" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1t4yvft_di" bpmnElement="assign_task_external">
        <dc:Bounds x="790" y="337" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0kp64yx_di" bpmnElement="Activity_0a8z6i0">
        <dc:Bounds x="640" y="190" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0ya29n7_di" bpmnElement="Activity_0mapgce">
        <dc:Bounds x="790" y="190" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19bmqk6_di" bpmnElement="Activity_1l3ryn0">
        <dc:Bounds x="940" y="190" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_058urk1_di" bpmnElement="Gateway_0tjbvtl">
        <dc:Bounds x="195" y="352" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0djj92a_di" bpmnElement="Activity_1cofxkq">
        <dc:Bounds x="300" y="490" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_05k0i7x_di" bpmnElement="recordTaskAsComplete">
        <dc:Bounds x="790" y="490" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0xiuqhc_di" bpmnElement="Event_0ya50l6">
        <dc:Bounds x="872" y="319" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0gu91uj_di" bpmnElement="sendRerminder2">
        <dc:Bounds x="822" y="319" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0adid3g_di" bpmnElement="sendReminder1">
        <dc:Bounds x="772" y="319" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="798" y="242" width="24" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
